"use strict";angular.module("rac.directives",[]),angular.module("rac.controllers",[]),angular.module("rac.services",[]),angular.module("rac.filters",[]),angular.module("rac",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","uiGmapgoogle-maps","mwl.calendar","rac.directives","rac.filters","angularUtils.directives.dirDisqus"]).constant("API_URL","https://rac-dashboard.herokuapp.com/api").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/live",{templateUrl:"views/live.html",controller:"LiveCtrl"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl"}).when("/schedule",{templateUrl:"views/schedule.html",controller:"ScheduleCtrl"}).when("/blog",{templateUrl:"views/blog.html",controller:"BlogCtrl"}).when("/blog/:title",{templateUrl:"views/post.html",controller:"PostCtrl"}).when("/show/:title",{templateUrl:"views/show.html",controller:"ShowCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("rac").controller("HomeCtrl",["$scope","$gallery","$page","$sce","$mixcloud",function(a,b,c,d,e){a.images=[],a.mixcloud=[],a.interval=3e3,c.get({name:"home"},function(b){a.content=d.trustAsHtml(b.content)}),b.get({name:"home-page-slider"},function(b){b[0].active=!0,a.images=b}),e.get({},function(b){a.mixcloud=b.data.slice(0,4)})}]),angular.module("rac").controller("AboutCtrl",["$scope","$sce","$page","$gallery",function(a,b,c,d){a.title="Nosotros",c.get({name:"about"},function(c){a.content=b.trustAsHtml(c.content),a.title=c.title,a.subTitle=c.subTitle}),d.get({name:"workspace"},function(b){a.images=b})}]),angular.module("rac").controller("ScheduleCtrl",["$scope","$mixcloud","$page","$show","$current","$location",function(a,b,c,d,e,f){a.calendarView="month",a.currentDay=new Date,a.shows=[],a.title="ProgramaciÃ³n",a.subTitle="",a.goToShow=function(a){e.show=this.shows[a],f.path("/show/"+e.show.title)},a.events=[{title:"Perros de la Calle",type:"info",startsAt:new Date(2015,1,1,10),endsAt:new Date(2016,1,1,10),editable:!1,deletable:!1,draggable:!1,resizable:!0,recursOn:"month"},{title:"Basta de Todo",type:"success",startsAt:new Date(2015,1,1,14),endsAt:new Date(2016,1,1,14),editable:!1,deletable:!1,draggable:!1,resizable:!0,recursOn:"month"},{title:"No Somos Nadie",type:"warning",startsAt:new Date(2015,1,1,6),endsAt:new Date(2016,1,1,10),editable:!1,deletable:!1,draggable:!1,resizable:!0,recursOn:"month"},{title:"Metro y Medio",type:"inverse",startsAt:new Date(2015,1,1,18),endsAt:new Date(2016,1,1,18),editable:!1,deletable:!1,draggable:!1,resizable:!0,recursOn:"month"}],c.get({name:"schedule"},function(b){a.title=b.title,a.subTitle=b.subTitle}),d.get({},function(b){a.shows=b})}]),angular.module("rac").controller("LiveCtrl",["$scope","$sce","$page",function(a,b,c){a.title="Radio En Vivo!",c.get({name:"live"},function(c){a.content=b.trustAsHtml(c.content),a.title=c.title})}]),angular.module("rac").controller("BlogCtrl",["$scope","$post","$page","$sce","$location","$current",function(a,b,c,d,e,f){var g=0;a.endOfBlogs=!1,a.posts=[],a.title="Blog",c.get({name:"blog"},function(b){a.title=b.title,a.content=d.trustAsHtml(b.content)}),a.goToPost=function(a){f.post=this.posts[a],e.path("/blog/"+f.post.title)},a.getPosts=function(){a.endOfBlogs||b.get({skip:g},function(b){b&&b.length>0?(a.posts.push(b[0]),b[1]&&a.posts.push(b[1]),g+=2):a.endOfBlogs=!0})},a.getPosts()}]),angular.module("rac").controller("ContactCtrl",["$scope","$page","$email","$sce",function(a,b,c,d){a.title="Contactanos",a.isSending=!1,a.email={},a.map={center:{latitude:-34.5776996,longitude:-58.46083050000004},zoom:16,options:{panControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,zoomControl:!1,mapTypeControl:!1}},a.marker={key:"rac",location:{latitude:-34.5776996,longitude:-58.46083050000004}},b.get({name:"contact"},function(b){a.content=d.trustAsHtml(b.content),a.title=b.title}),a.sendEmail=function(){a.emailForm.$valid&&(a.isSending=!0,c.save({from:a.email.from,message:a.email.message,name:a.email.name},function(){a.isSending=!1,a.alert={message:a.email.name+", gracias por escribirnos, nos pondremos en contacto a la brevedad.",type:"success"},a.email={}}))}}]),angular.module("rac").controller("PostCtrl",["$scope","$location","$current","$window",function(a,b,c,d){a.post=c.post,a.post?a.post.url=d.location.href:b.path("/blog")}]),angular.module("rac").controller("AsideCtrl",["$scope","$ad","$widget",function(a,b,c){a.ads=[],a.widgets=[],b.get({},function(b){a.ads=b}),c.get({},function(b){a.widgets=b})}]),angular.module("rac").controller("HeaderCtrl",["$scope","$weather","$currentShow",function(a,b,c){a.temp={},a.isPlaying=!1,b.get({},function(b){a.temp=b.main}),a.play=function(){a.isPlaying=!a.isPlaying},c.get({},function(b){a.currentShow=b})}]),angular.module("rac").controller("ShowCtrl",["$scope","$location","$current",function(a,b,c){a.show=c.show,a.show||b.path("/schedule")}]),angular.module("rac").factory("$page",["$resource",function(a){return a("http://localhost:3000/api/page/:name")}]),angular.module("rac").factory("$post",["$resource",function(a){return a("http://localhost:3000/api/post/?skip=:skip",{},{get:{method:"GET",isArray:!0}})}]),angular.module("rac").factory("$gallery",["$resource",function(a){return a("http://localhost:3000/api/gallery/:name",{},{get:{method:"GET",isArray:!0}})}]),angular.module("rac").factory("$email",["$resource",function(a){return a("http://localhost:3000/api/email/:from",{from:"@from"},{save:{method:"POST",isArray:!0}})}]),angular.module("rac").factory("$mixcloud",["$resource",function(a){return a("http://api.mixcloud.com/radioalacalle/cloudcasts?callback=callbackfn",{callback:"JSON_CALLBACK"},{get:{method:"JSONP"}})}]),angular.module("rac").factory("$current",function(){var a,b;return{post:a,show:b}}),angular.module("rac").factory("$ad",["$resource","API_URL",function(a,b){return a(b+"/ad",{},{get:{method:"GET",isArray:!0}})}]),angular.module("rac").factory("$widget",["$resource",function(a){return a("http://localhost:3000/api/widget",{},{get:{method:"GET",isArray:!0}})}]),angular.module("rac").factory("$weather",["$resource",function(a){return a("http://api.openweathermap.org/data/2.5/weather?id=3433955&units=metric&appid=c51971bedd25383fc22e9e2846e868b1",{},{get:{method:"GET"}})}]),angular.module("rac").factory("$show",["$resource",function(a){return a("http://localhost:3000/api/show",{},{get:{method:"GET",isArray:!0}})}]).factory("$currentShow",["$resource",function(a){return a("http://localhost:3000/api/show/current",{},{get:{method:"GET"}})}]),angular.module("rac.directives").directive("infiniteScroll",["$window",function(a){return function(b,c,d){angular.element(a).bind("scroll",function(){$(window).scrollTop()===$(document).height()-$(window).height()&&b.$apply(d.infiniteScroll)})}}]),angular.module("rac.directives").directive("script",function(){return{restrict:"A",link:function(a,b,c){b.html(c.script)}}}),angular.module("rac.directives").directive("currentTime",["dateFilter",function(a){return function(b,c,d){function e(){var b=a(new Date,g);c.text(b)}function f(){setTimeout(function(){e(),f()},1e3)}var g;b.$watch(d.currentTime,function(a){g=a,e()}),f()}}]),angular.module("rac.directives").directive("isFlash",function(){return{restrict:"A",link:function(a,b,c){var d="true"===c.isFlash,e="undefined"!=typeof navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash")!==!1;e&&d?$(b.html(c.script)).show():$(b.html(c.script)).hide()}}}),angular.module("rac.filters").filter("text",function(){return function(a){return a?a.replace(/<(.|\n)*?>/g,""):""}});